<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>LAMP &#8211; freniche.com</title>
	<atom:link href="/tag/lamp/feed/" rel="self" type="application/rss+xml" />
	<link>/</link>
	<description>Another personal blog about everything tech-related</description>
	<lastBuildDate>Sun, 30 Dec 2018 19:56:49 +0000</lastBuildDate>
	<language>es-ES</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.8.13</generator>
	<item>
		<title>Crear un sitio web WordPress con una m치quina virtual local</title>
		<link>/2011/04/13/crear-un-sitio-web-wordpress-con-una-maquina-virtual-local/</link>
		<comments>/2011/04/13/crear-un-sitio-web-wordpress-con-una-maquina-virtual-local/#comments</comments>
		<pubDate>Wed, 13 Apr 2011 09:16:04 +0000</pubDate>
		<dc:creator><![CDATA[dfreniche]]></dc:creator>
				<category><![CDATA[Inform치tica]]></category>
		<category><![CDATA[Web2.0]]></category>
		<category><![CDATA[LAMP]]></category>
		<category><![CDATA[vmware]]></category>
		<category><![CDATA[wordpress]]></category>

		<guid isPermaLink="false">/?p=1466</guid>
		<description><![CDATA[En el 칰ltimo post coment칠 que estaba usando una m치quina virtual de Bitnami para hacer sitios web con WordPress y me pidi칩 Fernando que explicara c칩mo subir el resultado de ese sitio web a un servidor que tengamos contratado en hosting. Ya que lo estoy haciendo esta semana, voy a anotarlo (para que no se [&#8230;]]]></description>
				<content:encoded><![CDATA[<p style="text-align: justify;">En el <a href="/2011/04/05/una-manana-de-trabajo-cualquiera/">칰ltimo post </a>coment칠 que estaba usando una m치quina virtual de Bitnami para hacer sitios web con WordPress y me pidi칩 <a href="/2011/04/05/una-manana-de-trabajo-cualquiera/comment-page-1/#comment-13164">Fernando</a> que explicara c칩mo subir el resultado de ese sitio web a un servidor que tengamos contratado en hosting. Ya que lo estoy haciendo esta semana, voy a anotarlo (para que no se me olvide), pero me gustar칤a empezar por el principio. Y ya advierto: este post est치 lleno de frikismo, comando UNIX de terminal y cosas ininteligibles. Luego no te quejes.</p>
<h1>쯇or qu칠 una m치quina virtual? 쯏 qu칠 es Bitnami?</h1>
<p style="text-align: justify;">Una m치quina virtual es un programa que me permite ejecutar un S.O. completo dentro de otro. Por ejemplo, puedo arrancar Linux dentro de Windows 7, o Windows XP dentro de Mac OS X. Las m치quinas virtuales tienen m칰ltiples usos, pero a mi me encantan para no llenar de programas mi S.O. base. As칤 no se ralentiza, ni tengo el disco duro lleno de programas de 춺usar y tirar췉.</p>
<p style="text-align: justify;">En el caso de crear un sitio web con WordPress es a칰n peor. Sin la m치quina virtual necesitas:</p>
<ul>
<li>un servidor web, como Apache, que soporte PHP</li>
<li>un servidor de BB.DD., como MySQL</li>
<li>configurarlo todo</li>
<li>instalar WordPress</li>
<li>y luego, claro, crear tu sitio con WP, es decir, instalar plugins, ponerlo en Espa침ol, crear contenido, probar diferentes temas, etc.</li>
</ul>
<p style="text-align: justify;">Todo esto se podr칤a hacer directamente en nuestro servidor (ese que tenemos contratado en hosting), pero los inconvenientes son varios:</p>
<p style="text-align: justify;">el sitio est치 visible mientras lo preparamos (a no ser que lo protejamos, por ej. mediante autenticaci칩n HTTP, pero eso exige <em>a칰n</em> m치s trabajo)</p>
<p style="text-align: justify;">si la conexi칩n que tenemos a Internet es <em>mejorable</em>, vamos a tardar bastante</p>
<p style="text-align: justify;">Por eso, lo ideal es disponer de una m치quina virtual, por ejemplo con Linux ya instalado y que lo traiga todo (Linux, Apache, MySQL, PHP y WordPress). Esto es lo que se llama un servidor LAMP + WordPress. Buscando en el <a href="http://www.vmware.com/appliances/">cat치logo de m치quinas virtuales gratu칤tas que tiene VMWare</a> me encontr칠 con la <a href="http://bitnami.org/stack/wordpress">Appliance de Bitnami</a>. Es una m치quina virtual VMWare con todo lo anterior ya instalado y configurado, gracias a la empresa Bitnami. Para instalarla, la descargamos y descomprimidos, y listo: ya podemos abrirla con VMWare. En mi caso, me he bajado la versi칩n basada en Ubuntu, porque dominio mejor los Linux Debian-based que otros.</p>
<h1>Manejando la m치quina virtual de Bitnami</h1>
<p style="text-align: justify;">La m치quina cuando arranca nos muestra una pantalla poco espectacular. Termina con un mensaje que nos indica c칩mo nos podemos conectar al WordPress que tiene dentro, y poco m치s.</p>
<p style="text-align: justify;">
<div id="attachment_1469" style="width: 589px" class="wp-caption aligncenter"><a href="/wp-content/uploads/2011/04/bitnami.png"><img class="size-full wp-image-1469" title="MV Bitnami" src="/wp-content/uploads/2011/04/bitnami.png" alt="MV Bitnami" width="579" height="438" srcset="/wp-content/uploads/2011/04/bitnami.png 579w, /wp-content/uploads/2011/04/bitnami-300x226.png 300w" sizes="(max-width: 579px) 100vw, 579px" /></a><p class="wp-caption-text">MV Bitnami</p></div>
<p style="text-align: justify;">En mi caso me indica que conect치ndome a la IP http://10.0.1.25/ me aparecer치 la interfaz web de la m치quina virtual. Esa interfaz es una p치gina web con informaci칩n y el acceso al WP que est치 instalado dentro. Inicialmente el usuario es 춺user췉 y el password 춺bitnami췉. Al entrar, llegamos a un WP vac칤o, que podemos proceder a adaptar. En mi caso, lo que he estado haciendo ha sido:</p>
<ul>
<li>traducirlo al Espa침ol. Abajo lo cuento con detalle.</li>
<li>instalar un tema de pago que queda bonito y que ten칤a por ah칤 abandonado. Me lo compr칠 en el bundle de dise침o <a href="http://bundlehunt.com/">Bundlehunt</a>.</li>
<li>instalar unos cuantos plugins, para tener un formulario de contacto, mapas de Google, etc.</li>
<li>crear las p치ginas necesarias y copiar el contenido (texto y fotos) del sitio web antiguo</li>
</ul>
<p style="text-align: justify;">Probablemente lo m치s 춺complicado췉 sea traducir WP a espa침ol. Pero es muy sencillo. S칩lo hay que ir a la p치gina que tiene la traducci칩n de WordPress y bajarse el ZIP. Lo descomprimimos y veremos que un WP completo, s칩lo que ya traducido. Como a m칤 me gustan las cosas complicadas, prefiero pasar s칩lo los ficheros de localizaci칩n al Espa침ol y decirle a WP que est치 en Espa침ol <img src="https://s.w.org/images/core/emoji/2.3/72x72/1f642.png" alt="游뗵" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>Para eso, debemos iniciar sesi칩n en la m치quina virtual, e ir a la carpeta: /opt/bitnami/apps/wordpress/htdocs/wp-content/ con un:</p>
<pre>$ cd /opt/bitnami/apps/wordpress/htdocs/wp-content/</pre>
<p>Bitnami guarda en /opt/bitnami/apps las aplicaciones web que lleva el appliance, concretamente PhpMyAdmin y WP.</p>
<p>Ahora, vamos a copiar los ficheros que antes descomprimimos. Los vamos a copiar por scp (suponiendo que te conectes a una m치quina *NIX), con algo como:</p>
<pre>$ scp usuario@la-ip-de-tu-maquina-real:/Users/tu-usuario/Desktop/wordpress/wp-content/languages/* .</pre>
<p style="text-align: justify;">Lo que hace la 춺frase m치gica췉 anterior es conectarse a tu ordenador real (debes indicar la IP), con tu usuario (con el que has iniciado sesi칩n). Te pedir치 tu clave. Lo que hace es copiar los ficheros de la ruta que le hemos indicado, en la carpeta de la m치quina virtual en la que est치bamos.</p>
<p style="text-align: justify;">Bueno, WP tiene los ficheros en su sitio, pero no los va a usar hasta que no se lo digamos. Para ello, hay que modificar el fichero wp-config.php (en nuestro caso, est치 en /opt/bitnami/apps/wordpress/htdocs, por lo que bastar치 con hacer un cd ..). Yo lo he modificado con vi, que para eso estoy en modo <em>geek</em> :-). Hay que buscar la l칤nea que pone:</p>
<p style="text-align: justify;">
<pre>define ('WPLANG', 'xxxx');</pre>
<div>y dejarla as칤:</div>
<pre>define ('WPLANG', 'es_ES');</pre>
<p>Una vez que hemos acabado, grabamos y listo. Yo reinici칠 la m치quina virtual completa (con reboot) para comprobar que todo estaba OK.</p>
<h1>Subiendo todo esto a mi servidor en hosting</h1>
<p>Ahora que todo funciona como queremos y hemos terminado en local 쯖칩mo subimos todo esto a mi servidor web?. Supongo que tienes un dominio, pongamos www.misuperwebquemevaahacerrico.com y su alojamiento asociado. Hay que tener claro lo que hay que subir:</p>
<ul>
<li>por un lado, el sitio web de WordPress. Nada m치s en el apartado web. Es decir, ni la configuraci칩n de Apache, ni otras cosas. En el caso de bitnami, ser칤a la carpeta /opt/bitnami/apps/wordpress de la m치quina virtual</li>
<li>por otro, la base de datos asociada a esta web. Esa BD est치 en el MySQL que tiene la m치quina virtual de bitnami.</li>
</ul>
<h2>Subiendo el wordpress</h2>
<p>Lo primero que vamos a hacer va a ser comprimir la carpeta. En la m치quina virtual tecleamos:</p>
<pre>$ cd /opt/bitnami/apps</pre>
<p>una vez en la carpeta apps, nos convertimos en root (ya que si no no podremos leer algunas de las carpetas del WP), con:</p>
<pre>$ sudo su</pre>
<p>comprimimos con el proverbial tar:</p>
<pre>tar cvfz wp.tgz wordpress</pre>
<p>esto va a comprimir la carpeta wordpress completa en un fichero llamado wp.tgz. Ahora hay que subir ese fichero a nuestro proveedor de alojamiento. Para eso, primero lo voy a copiar a la m치quina f칤sica, usando de nuevo scp:</p>
<pre>$ scp wp.tgz usuario@la-ip-de-tu-maquina-real:/Users/tu-usuario/Desktop/</pre>
<p>Eso deber칤a dejar el fichero wp.tgz en tu escritorio. Espero <img src="https://s.w.org/images/core/emoji/2.3/72x72/1f642.png" alt="游뗵" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p style="text-align: justify;">Ahora s칩lo te queda subirlo, usando el interfaz que te de tu proveedor de alojamiento. En mi caso, esto va a <a href="http://www.redcoruna.com/">RedCoruna</a> y tienen, como todo el mundo, CPanel, que viene con un explorador de ficheros integrado en el navegador que permite subir cosas. Cuando lo tengas en la carpeta que te interesa, descompr칤melo. Podr치s acceder mediante: http://www.tudominioesequetevaahacerrico.com/wordpress. Y te va a fallar. Recuerda: no hay base de datos a칰n.</p>
<h2>Subiendo la BD</h2>
<p style="text-align: justify;">Para subir la BD, primero vamos a exportarla. Para ello, necesitamos activar una aplicaci칩n que viene en la m치quina virtual, pero que por razones de seguridad est치 desabilitada. Es PhpMyAdmin, una aplicaci칩n web para administrar el servidor de BB.DD. MySQL. Para activarlo, vamos a /opt/bitnami/apps/phpmyadmin/conf/ y editamos phpmyadmin.conf</p>
<pre>$ cd /opt/bitnami/apps/phpmyadmin/conf/</pre>
<pre>$ vi phpmyadmin.conf</pre>
<p>y cambiamos la l칤nea que pone</p>
<pre>Allow from 127.0.0.1</pre>
<p>por</p>
<pre>Allow from all</pre>
<div id="attachment_1481" style="width: 770px" class="wp-caption aligncenter"><a href="/wp-content/uploads/2011/04/allow-from-all.png"><img class="size-full wp-image-1481" title="Configurando phpMyAdmin" src="/wp-content/uploads/2011/04/allow-from-all.png" alt="Configurando phpMyAdmin" width="760" height="539" srcset="/wp-content/uploads/2011/04/allow-from-all.png 760w, /wp-content/uploads/2011/04/allow-from-all-300x212.png 300w" sizes="(max-width: 760px) 100vw, 760px" /></a><p class="wp-caption-text">Configurando phpMyAdmin</p></div>
<p>Debemos reiniciar el servidor Apache para que este cambio entre en funcionamiento. En el caso de la m치quina virtual de bitnami lo hacemos con:</p>
<pre>$ /opt/bitnami/ctlscript.sh restart apache</pre>
<p>Ahora, apuntando un navegador a http://10.0.1.25/phpmyadmin nos aparecer치 una pantalla de login. Usuario: administrator, clave: bitnami y al fin se abre el PhpMyAdmin</p>
<p>Dentro de PhpMyAdmin veremos la lista de BB.DD. a la izquierda:</p>
<div id="attachment_1483" style="width: 188px" class="wp-caption aligncenter"><a href="/wp-content/uploads/2011/04/bbdds.png"><img class="size-full wp-image-1483" title="Lista de BB.DD." src="/wp-content/uploads/2011/04/bbdds.png" alt="Lista de BB.DD." width="178" height="72" /></a><p class="wp-caption-text">Lista de BB.DD.</p></div>
<p style="text-align: justify;">Escogemos la nuestra (bitnami_wordpress) y nos vamos a la solapa 춺Exportar췉. Tal como viene debe funcionar. Marcamos la opci칩n 춺Enviar (genera un archivo descargable)췉 y se nos descargar치, al pulsar Continuar, un fichero con extensi칩n .sql en nuestra m치quina. 춰Esa es nuestra BD!</p>
<p style="text-align: justify;">Ojo: en ese fichero (que es la BD de WordPress) las URLs est치n metidas 춺a pelo췉. Es decir, est치 lleno de 10.1.0.25 por todos lados. Y no queremos eso. En mi caso, he usado TextEdit de Mac para buscar y sustituir todas las ocurrencias de 10.0.1.25 por www.viajescarrasco.com, que es el dominio que estaba usando. Es un poco lamentable que WP meta en su BD referencias al dominio 춺hardcoded췉 en lugar de usar una variable, pero es lo que hay.</p>
<p style="text-align: justify;">
<p style="text-align: justify;">Ahora s칩lo nos queda subirla a nuestro dominio (probablemente usando el PhpMyAdmin de nuestro CPanel). Pista importante: ahora hay que buscar la pesta침a 춺importar췉 de PhpMyAdmin e indicarle el fichero .sql anterior :-). Casi seguro que tendremos que crear la BD, un usuario para la misma y darle permisos a ese usuario para esa BD. Todo se hace en CPanel.</p>
<h2>Configurar el sitio web</h2>
<p>Pero a칰n no funciona nada. 쯇or qu칠?. Porque hemos subido un sitio web WordPress que piensa que est치 instalado en http://10.0.1.25,/ en lugar de en http://www.midominioetcetc.com./ Hay que configurar eso. Para ello, buscamos el fichero wp-config.php (s칤, el mismo que tocamos para el idioma) y cambiar el nombre de la BD, usuario y password. Nos debe quedar algo como:</p>
<pre>define('DB_NAME', 'minombrededb');

/** MySQL database username */
define('DB_USER', 'usuarioquehecreado');

/** MySQL database password */
define('DB_PASSWORD', 'laclave');

/** MySQL hostname */
define('DB_HOST', 'localhost:3306');</pre>
<p>Adem치s, debemos cambiar el fichero .htaccess que viene con bitnami y dejarlo as칤:</p>
<pre># BEGIN WordPress</pre>
<pre>&lt;IfModule mod_rewrite.c&gt;</pre>
<pre>RewriteEngine On</pre>
<pre>RewriteBase /</pre>
<pre>RewriteRule ^index\.php$ - [L]</pre>
<pre>RewriteCond %{REQUEST_FILENAME} !-f</pre>
<pre>RewriteCond %{REQUEST_FILENAME} !-d</pre>
<pre>RewriteRule . /index.php [L]</pre>
<pre>&lt;/IfModule&gt;</pre>
<pre># END WordPress</pre>
<div style="text-align: justify;">Este fichero hace la 춺magia negra췉 de la reescritura de URLs, de forma que funcionen los nombres de p치gina en WP, por ej., cuando escribimos blog.freniche.com/formacion y nos lleva a la p치gina correcta. No existe una carpeta llamada formaci칩n: se 춺traduce췉 al vuelo de forma que el WP lo interprete correctamente.</div>
<h2>Conclusi칩n</h2>
<div style="text-align: justify;">Como puedes ver, el proceso de traslado del sitio web es un poco laborioso. Lo bueno que es esto te servir칤a para mover tu WordPress entre diferentes proveedores de alojamiento. Y lo mejor de todo es que con la m치quina virtual puedes hacer todas las pruebas que quieras, sin riesgos.</div>
<div style="text-align: justify;">EOF.</div>
<p style="text-align: justify;">
<p style="text-align: justify;">
]]></content:encoded>
			<wfw:commentRss>/2011/04/13/crear-un-sitio-web-wordpress-con-una-maquina-virtual-local/feed/</wfw:commentRss>
		<slash:comments>5</slash:comments>
		</item>
	</channel>
</rss>
